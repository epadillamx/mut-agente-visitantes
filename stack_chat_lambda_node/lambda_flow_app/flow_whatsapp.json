{
    "version": "7.2",
    "data_api_version": "3.0",
    "routing_model": {
        "INCIDENT_FORM": [
            "INCIDENT_DETAILS"
        ],
        "INCIDENT_DETAILS": [
            "CONFIRMATION"
        ],
        "CONFIRMATION": []
    },
    "screens": [
        {
            "id": "INCIDENT_FORM",
            "title": "Reportar Incidencia",
            "data": {
                "locales": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "id": {
                                "type": "string"
                            },
                            "title": {
                                "type": "string"
                            }
                        }
                    },
                    "__example__": [
                        {
                            "id": "0",
                            "title": "Escribe arriba para buscar..."
                        }
                    ]
                },
                "is_local_enabled": {
                    "type": "boolean",
                    "__example__": false
                },
                "search_helper": {
                    "type": "string",
                    "__example__": "Escribe m铆nimo 4 caracteres y presiona Buscar"
                }
            },
            "layout": {
                "type": "SingleColumnLayout",
                "children": [
                    {
                        "type": "Form",
                        "name": "incident_form",
                        "children": [
                            {
                                "type": "TextHeading",
                                "text": " Local"
                            },
                            {
                                "type": "TextInput",
                                "label": "Buscar ..",
                                "name": "busqueda_local",
                                "required": true,
                                "helper-text": "${data.search_helper}"
                            },
                            {
                                "type": "EmbeddedLink",
                                "text": " Buscar Local",
                                "on-click-action": {
                                    "name": "data_exchange",
                                    "payload": {
                                        "trigger": "search_local",
                                        "busqueda_local": "${form.busqueda_local}"
                                    }
                                }
                            },
                            {
                                "type": "Dropdown",
                                "label": "Seleccionar Local",
                                "name": "local",
                                "data-source": "${data.locales}",
                                "required": true,
                                "enabled": "${data.is_local_enabled}"
                            },
                            {
                                "type": "TextInput",
                                "label": "Nombre completo",
                                "name": "nombre",
                                "required": true
                            },
                            {
                                "type": "TextInput",
                                "label": "Correo electr贸nico",
                                "name": "email",
                                "input-type": "email",
                                "required": true
                            },
                            {
                                "type": "Footer",
                                "label": "Continuar",
                                "on-click-action": {
                                    "name": "data_exchange",
                                    "payload": {
                                        "trigger": "go_to_details",
                                        "nombre": "${form.nombre}",
                                        "email": "${form.email}",
                                        "local": "${form.local}"
                                    }
                                }
                            }
                        ]
                    }
                ]
            }
        },
        {
            "id": "INCIDENT_DETAILS",
            "title": "Detalles de Incidencia",
            "data": {
                "nombre": {
                    "type": "string",
                    "__example__": "Juan P茅rez"
                },
                "email": {
                    "type": "string",
                    "__example__": "juan@correo.com"
                },
                "local": {
                    "type": "string",
                    "__example__": "local_1"
                }
            },
            "layout": {
                "type": "SingleColumnLayout",
                "children": [
                    {
                        "type": "Form",
                        "name": "incident_details_form",
                        "children": [
                            {
                                "type": "TextHeading",
                                "text": "锔 Incidencia"
                            },
                            {
                                "type": "TextBody",
                                "text": "Por favor describa detalladamente el problema encontrado."
                            },
                            {
                                "type": "TextArea",
                                "label": "Descripci贸n",
                                "name": "incidencia",
                                "required": true,
                                "helper-text": "Incluya todos los detalles relevantes"
                            },
                            {
                                "type": "Footer",
                                "label": "Continuar",
                                "on-click-action": {
                                    "name": "data_exchange",
                                    "payload": {
                                        "trigger": "go_to_confirmation",
                                        "nombre": "${data.nombre}",
                                        "email": "${data.email}",
                                        "local": "${data.local}",
                                        "incidencia": "${form.incidencia}"
                                    }
                                }
                            }
                        ]
                    }
                ]
            }
        },
        {
            "id": "CONFIRMATION",
            "title": "Confirmaci贸n",
            "terminal": true,
            "data": {
                "nombre": {
                    "type": "string",
                    "__example__": "Juan P茅rez"
                },
                "email": {
                    "type": "string",
                    "__example__": "juan@correo.com"
                },
                "local": {
                    "type": "string",
                    "__example__": "local_1"
                },
                "incidencia": {
                    "type": "string",
                    "__example__": "Problema con el aire acondicionado"
                },
                "resumen_datos": {
                    "type": "string",
                    "__example__": "Nombre: Juan P茅rez\nEmail: juan@correo.com"
                },
                "resumen_incidencia": {
                    "type": "string",
                    "__example__": "Local: Centro Comercial Norte\nDescripci贸n: Problema con el aire acondicionado"
                }
            },
            "layout": {
                "type": "SingleColumnLayout",
                "children": [
                    {
                        "type": "Form",
                        "name": "confirmation_form",
                        "children": [
                            {
                                "type": "TextHeading",
                                "text": " Resumen del Reporte"
                            },
                            {
                                "type": "TextSubheading",
                                "text": "Datos del reportante"
                            },
                            {
                                "type": "TextBody",
                                "text": "${data.resumen_datos}"
                            },
                            {
                                "type": "TextSubheading",
                                "text": "Detalles de la incidencia"
                            },
                            {
                                "type": "TextBody",
                                "text": "${data.resumen_incidencia}"
                            },
                            {
                                "type": "OptIn",
                                "name": "confirmacion",
                                "label": "Confirmo que la informaci贸n es correcta",
                                "required": true
                            },
                            {
                                "type": "Footer",
                                "label": "Enviar Reporte",
                                "on-click-action": {
                                    "name": "complete",
                                    "payload": {
                                        "nombre": "${data.nombre}",
                                        "email": "${data.email}",
                                        "local": "${data.local}",
                                        "incidencia": "${data.incidencia}"
                                    }
                                }
                            }
                        ]
                    }
                ]
            }
        }
    ]
}